<template>
    <div class="container__left-drawer" ref="cld" v-click-outside="vcoConfig"  v-touch:swipe.left="swipeLeft"
         :class="{
        'container__left-drawer__mobile': this.is_mobile,
        'container__left-drawer__mobile--opened': this.is_mobile && this.left_drawer,
    }"

    >
        <div v-if="left_drawer" class="sidebar" :class="{'sidebar--mobile': this.is_mobile}">

                <div class="sidebar__close" v-on:click="handleLeftDrawer">
                    <closeX></closeX>
                </div>

                <div class="sidebar__head top-head">
                    <div class="title sidebar__block" @click="routerPush">
                        <the-hot-meal/>
                    </div>

                    <div class="sidebar__block little__profile">
                        <div class="little__profile__avatar" >
                            <label for="userpic_input">
                                <userpic/>
                                <div class="little__profile__edit shadowbox">
                                    <svg width="10" height="10" viewBox="0 0 10 10" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M5.45 2.42904L7.571 4.55054L2.621 9.50004H0.5V7.37854L5.45 2.42904ZM6.157 1.72204L7.2175 0.661042C7.31126 0.567306 7.43842 0.514648 7.571 0.514648C7.70358 0.514648 7.83073 0.567306 7.9245 0.661042L9.339 2.07554C9.43273 2.16931 9.48539 2.29646 9.48539 2.42904C9.48539 2.56162 9.43273 2.68878 9.339 2.78254L8.278 3.84304L6.157 1.72204Z"/>
                                    </svg>
                                </div>
                            </label>
                        </div>
                        <div class="little__profile__username sidebar__block">
                            {{ user.name + ' ' + user.last_name }}
                        </div>
                        <div class="m-auto btn-block">
                            <button @click="toPlan" class="btn return">
                                <span class="icon">
                                    <svg width="14" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M5.66666 5.83301V9.16634L0.666656 4.99967L5.66666 0.833008V4.16634H9.83332C11.6014 4.16634 13.2971 4.86872 14.5474 6.11896C15.7976 7.3692 16.5 9.0649 16.5 10.833C16.5 12.6011 15.7976 14.2968 14.5474 15.5471C13.2971 16.7973 11.6014 17.4997 9.83332 17.4997H2.33332V15.833H9.83332C11.1594 15.833 12.4312 15.3062 13.3689 14.3685C14.3065 13.4309 14.8333 12.1591 14.8333 10.833C14.8333 9.50693 14.3065 8.23516 13.3689 7.29747C12.4312 6.35979 11.1594 5.83301 9.83332 5.83301H5.66666Z" fill="white"/>
                                    </svg>
                                </span>

                                <span>
                                     Return to User Setup
                                </span>
                            </button>
                        </div>
                    </div>

                    <div class="sidebar__block links">
                        <div class="links__title">
                            Dashboard
                        </div>
                        <router-link class="links__entry" :to="{name: 'dashboard.planner.meals'}" active-class="active" exact>
                            <div class="links__entry__icon">
                                <svg class="svg"  width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.167 2.49967H16.5003C16.7213 2.49967 16.9333 2.58747 17.0896 2.74375C17.2459 2.90003 17.3337 3.11199 17.3337 3.33301V16.6663C17.3337 16.8874 17.2459 17.0993 17.0896 17.2556C16.9333 17.4119 16.7213 17.4997 16.5003 17.4997H1.50033C1.27931 17.4997 1.06735 17.4119 0.91107 17.2556C0.75479 17.0993 0.666992 16.8874 0.666992 16.6663V3.33301C0.666992 3.11199 0.75479 2.90003 0.91107 2.74375C1.06735 2.58747 1.27931 2.49967 1.50033 2.49967H4.83366V0.833008H6.50033V2.49967H11.5003V0.833008H13.167V2.49967ZM15.667 7.49967V4.16634H13.167V5.83301H11.5003V4.16634H6.50033V5.83301H4.83366V4.16634H2.33366V7.49967H15.667ZM15.667 9.16634H2.33366V15.833H15.667V9.16634ZM4.00033 10.833H8.16699V14.1663H4.00033V10.833Z"/>
                                </svg>
                            </div>
                            <div class="links__entry__caption">
                                Meal Planner
                            </div>
                        </router-link>

                        <router-link class="links__entry" :to="{name: 'dashboard.planner.shopping'}" active-class="active" exact>
                            <div class="links__entry__icon">
                                <svg class="svg" width="16" height="19" viewBox="0 0 16 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3.83333 6.66634V4.99967C3.83333 3.89461 4.27232 2.8348 5.05372 2.0534C5.83512 1.27199 6.89493 0.833008 8 0.833008C9.10507 0.833008 10.1649 1.27199 10.9463 2.0534C11.7277 2.8348 12.1667 3.89461 12.1667 4.99967V6.66634H14.6667C14.8877 6.66634 15.0996 6.75414 15.2559 6.91042C15.4122 7.0667 15.5 7.27866 15.5 7.49967V17.4997C15.5 17.7207 15.4122 17.9326 15.2559 18.0889C15.0996 18.2452 14.8877 18.333 14.6667 18.333H1.33333C1.11232 18.333 0.900358 18.2452 0.744078 18.0889C0.587797 17.9326 0.5 17.7207 0.5 17.4997V7.49967C0.5 7.27866 0.587797 7.0667 0.744078 6.91042C0.900358 6.75414 1.11232 6.66634 1.33333 6.66634H3.83333ZM3.83333 8.33301H2.16667V16.6663H13.8333V8.33301H12.1667V9.99967H10.5V8.33301H5.5V9.99967H3.83333V8.33301ZM5.5 6.66634H10.5V4.99967C10.5 4.33663 10.2366 3.70075 9.76777 3.23191C9.29893 2.76307 8.66304 2.49967 8 2.49967C7.33696 2.49967 6.70107 2.76307 6.23223 3.23191C5.76339 3.70075 5.5 4.33663 5.5 4.99967V6.66634Z"/>
                                </svg>
                            </div>
                            <div class="links__entry__caption">
                                Shopping List
                            </div>
                        </router-link>


                        <!-- Hidden the Exercise Videos tab as per client request. -->
                        <router-link v-if="false" class="links__entry" :to="{name: 'dashboard.videos'}" active-class="active" exact>
                            <div class="links__entry__icon">
                                <svg class="svg" width="14" height="19" viewBox="0 0 14 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6.19165 6.325L4.66665 6.88V9.83333H2.99999V5.70833H3.01249L7.40249 4.11C7.60582 4.0325 7.82749 3.99333 8.05415 4.00083C8.50708 4.01213 8.94523 4.16426 9.30769 4.43607C9.67016 4.70788 9.93894 5.08588 10.0767 5.5175C10.2317 6.00333 10.3733 6.33167 10.5017 6.5025C10.8895 7.01968 11.3925 7.43936 11.9709 7.72823C12.5492 8.0171 13.1869 8.16722 13.8333 8.16667V9.83333C12.9727 9.83427 12.1226 9.6444 11.3442 9.27739C10.5658 8.91038 9.87848 8.37535 9.33165 7.71083L8.84749 10.4583L10.5 12.0583V18.1667H8.83332V13.1783L7.12499 11.5225L6.33582 15.1042L0.59082 14.0917L0.88082 12.45L4.98415 13.1733L6.19165 6.325ZM9.24999 3.58333C8.80796 3.58333 8.38404 3.40774 8.07148 3.09518C7.75892 2.78262 7.58332 2.35869 7.58332 1.91667C7.58332 1.47464 7.75892 1.05072 8.07148 0.738155C8.38404 0.425595 8.80796 0.25 9.24999 0.25C9.69201 0.25 10.1159 0.425595 10.4285 0.738155C10.7411 1.05072 10.9167 1.47464 10.9167 1.91667C10.9167 2.35869 10.7411 2.78262 10.4285 3.09518C10.1159 3.40774 9.69201 3.58333 9.24999 3.58333Z"/>
                                </svg>
                            </div>
                            <div class="links__entry__caption">
                                Exercise Videos
                            </div>
                        </router-link>


                        <router-link class="links__entry" :to="{name: 'dashboard.progress'}" active-class="active" exact>
                            <div class="links__entry__icon">
                                <svg class="svg" width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M0.666992 8.83333H5.66699V15.5H0.666992V8.83333ZM12.3337 4.66667H17.3337V15.5H12.3337V4.66667ZM6.50033 0.5H11.5003V15.5H6.50033V0.5ZM2.33366 10.5V13.8333H4.00033V10.5H2.33366ZM8.16699 2.16667V13.8333H9.83366V2.16667H8.16699ZM14.0003 6.33333V13.8333H15.667V6.33333H14.0003Z"/>
                                </svg>
                            </div>
                            <div class="links__entry__caption">
                                Progress
                            </div>
                        </router-link>




                    </div>

                    <div class="sidebar__block links">
                        <div class="links__title">
                            Account
                        </div>

                        <a href="/admin" class="links__entry" v-if="this.$store.state.auth.user.is_admin">
                            <div class="links__entry__icon">
                                <svg class="svg" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1.78375 13.1665C1.43148 12.5573 1.15764 11.9061 0.96875 11.2282C1.37984 11.0191 1.72508 10.7004 1.96627 10.3073C2.20747 9.91416 2.33522 9.46199 2.33539 9.00078C2.33557 8.53957 2.20815 8.08731 1.96725 7.69402C1.72635 7.30073 1.38135 6.98174 0.970417 6.77235C1.34711 5.41026 2.06436 4.16648 3.05458 3.15819C3.44133 3.40962 3.8901 3.54915 4.35123 3.56134C4.81236 3.57352 5.26788 3.45788 5.66736 3.22721C6.06684 2.99655 6.39471 2.65985 6.61469 2.25439C6.83467 1.84892 6.93817 1.3905 6.91375 0.929852C8.28217 0.576204 9.71811 0.576778 11.0863 0.931519C11.062 1.39216 11.1658 1.85051 11.3859 2.25586C11.606 2.66121 11.934 2.99775 12.3336 3.22824C12.7332 3.45872 13.1887 3.57418 13.6498 3.56181C14.1109 3.54945 14.5596 3.40975 14.9462 3.15819C15.4288 3.64985 15.8571 4.20902 16.2171 4.83319C16.5779 5.45735 16.8479 6.10819 17.0321 6.77152C16.621 6.9806 16.2758 7.29933 16.0346 7.69244C15.7934 8.08555 15.6656 8.53772 15.6654 8.99893C15.6653 9.46013 15.7927 9.9124 16.0336 10.3057C16.2745 10.699 16.6195 11.018 17.0304 11.2274C16.6537 12.5894 15.9365 13.8332 14.9462 14.8415C14.5595 14.5901 14.1107 14.4506 13.6496 14.4384C13.1885 14.4262 12.733 14.5418 12.3335 14.7725C11.934 15.0032 11.6061 15.3399 11.3861 15.7453C11.1662 16.1508 11.0627 16.6092 11.0871 17.0699C9.71866 17.4235 8.28272 17.4229 6.91458 17.0682C6.93879 16.6075 6.83508 16.1492 6.61493 15.7438C6.39479 15.3385 6.06679 15.002 5.66723 14.7715C5.26767 14.541 4.81213 14.4255 4.35102 14.4379C3.88991 14.4503 3.44122 14.59 3.05458 14.8415C2.56208 14.339 2.13508 13.7762 1.78375 13.1665ZM6.50042 13.3299C7.38844 13.842 8.05612 14.664 8.37542 15.6382C8.79125 15.6774 9.20875 15.6782 9.62458 15.639C9.94408 14.6647 10.6121 13.8427 11.5004 13.3307C12.3881 12.8171 13.4342 12.6494 14.4379 12.8599C14.6796 12.5199 14.8879 12.1574 15.0613 11.7782C14.3774 11.0144 13.9997 10.025 14.0004 8.99985C14.0004 7.94985 14.3921 6.96902 15.0613 6.22152C14.8867 5.84248 14.6775 5.48038 14.4363 5.13985C13.4332 5.35011 12.3877 5.18275 11.5004 4.66985C10.6124 4.15766 9.94471 3.33567 9.62542 2.36152C9.20958 2.32235 8.79208 2.32152 8.37625 2.36069C8.05675 3.33498 7.38875 4.15699 6.50042 4.66902C5.61274 5.18262 4.56665 5.35029 3.56292 5.13985C3.32172 5.48009 3.11303 5.84224 2.93958 6.22152C3.62339 6.98532 4.00115 7.97468 4.00042 8.99985C4.00042 10.0499 3.60875 11.0307 2.93958 11.7782C3.11414 12.1572 3.32337 12.5193 3.56458 12.8599C4.56768 12.6496 5.61309 12.817 6.50042 13.3299ZM9.00042 11.4999C8.33738 11.4999 7.70149 11.2365 7.23265 10.7676C6.76381 10.2988 6.50042 9.66289 6.50042 8.99985C6.50042 8.33681 6.76381 7.70093 7.23265 7.23209C7.70149 6.76325 8.33738 6.49985 9.00042 6.49985C9.66346 6.49985 10.2993 6.76325 10.7682 7.23209C11.237 7.70093 11.5004 8.33681 11.5004 8.99985C11.5004 9.66289 11.237 10.2988 10.7682 10.7676C10.2993 11.2365 9.66346 11.4999 9.00042 11.4999ZM9.00042 9.83319C9.22143 9.83319 9.43339 9.74539 9.58967 9.58911C9.74595 9.43283 9.83375 9.22087 9.83375 8.99985C9.83375 8.77884 9.74595 8.56688 9.58967 8.4106C9.43339 8.25432 9.22143 8.16652 9.00042 8.16652C8.7794 8.16652 8.56744 8.25432 8.41116 8.4106C8.25488 8.56688 8.16708 8.77884 8.16708 8.99985C8.16708 9.22087 8.25488 9.43283 8.41116 9.58911C8.56744 9.74539 8.7794 9.83319 9.00042 9.83319Z"/>
                                </svg>
                            </div>
                            <div class="links__entry__caption">
                                Admin page
                            </div>
                        </a>


                        <template v-if="!is_mobile">
                            <a href="#" class="links__entry" @click="startTutorial"  v-if="this.$route.name == 'dashboard.planner.meals' && finished_setup">
                                <div class="links__entry__icon">
                                    <svg class="svg" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9.00033 17.3337C4.39783 17.3337 0.666992 13.6028 0.666992 9.00033C0.666992 4.39783 4.39783 0.666992 9.00033 0.666992C13.6028 0.666992 17.3337 4.39783 17.3337 9.00033C17.3337 13.6028 13.6028 17.3337 9.00033 17.3337ZM9.00033 15.667C10.7684 15.667 12.4641 14.9646 13.7144 13.7144C14.9646 12.4641 15.667 10.7684 15.667 9.00033C15.667 7.23222 14.9646 5.53652 13.7144 4.28628C12.4641 3.03604 10.7684 2.33366 9.00033 2.33366C7.23222 2.33366 5.53652 3.03604 4.28628 4.28628C3.03604 5.53652 2.33366 7.23222 2.33366 9.00033C2.33366 10.7684 3.03604 12.4641 4.28628 13.7144C5.53652 14.9646 7.23222 15.667 9.00033 15.667ZM8.16699 11.5003H9.83366V13.167H8.16699V11.5003ZM9.83366 10.1295V10.667H8.16699V9.41699C8.16699 9.19598 8.25479 8.98402 8.41107 8.82774C8.56735 8.67146 8.77931 8.58366 9.00033 8.58366C9.23706 8.58364 9.46892 8.51641 9.66893 8.38977C9.86894 8.26313 10.0289 8.0823 10.1301 7.86831C10.2314 7.65433 10.2698 7.41599 10.2409 7.18103C10.212 6.94607 10.117 6.72415 9.96685 6.54109C9.81675 6.35802 9.61775 6.22135 9.39301 6.14697C9.16827 6.07258 8.92702 6.06355 8.69735 6.12091C8.46767 6.17828 8.25901 6.29969 8.09563 6.47101C7.93226 6.64233 7.82089 6.85652 7.77449 7.08866L6.13949 6.76116C6.24085 6.25456 6.47492 5.78397 6.81776 5.39748C7.1606 5.01099 7.59992 4.72248 8.09082 4.56143C8.58171 4.40037 9.10656 4.37256 9.61173 4.48084C10.1169 4.58911 10.5842 4.82959 10.966 5.17768C11.3478 5.52577 11.6303 5.969 11.7846 6.46205C11.9389 6.95509 11.9595 7.48028 11.8444 7.98392C11.7292 8.48755 11.4824 8.95157 11.1291 9.32855C10.7758 9.70552 10.3288 9.98192 9.83366 10.1295Z" />
                                    </svg>
                                </div>
                                <div class="links__entry__caption">
                                    Tutorial
                                </div>
                            </a>
                        </template>


                       <router-link class="links__entry" :to="{name: 'dashboard.settings'}" active-class="active" exact>
                            <div class="links__entry__icon">
                                <svg class="svg" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1.78375 13.1665C1.43148 12.5573 1.15764 11.9061 0.96875 11.2282C1.37984 11.0191 1.72508 10.7004 1.96627 10.3073C2.20747 9.91416 2.33522 9.46199 2.33539 9.00078C2.33557 8.53957 2.20815 8.08731 1.96725 7.69402C1.72635 7.30073 1.38135 6.98174 0.970417 6.77235C1.34711 5.41026 2.06436 4.16648 3.05458 3.15819C3.44133 3.40962 3.8901 3.54915 4.35123 3.56134C4.81236 3.57352 5.26788 3.45788 5.66736 3.22721C6.06684 2.99655 6.39471 2.65985 6.61469 2.25439C6.83467 1.84892 6.93817 1.3905 6.91375 0.929852C8.28217 0.576204 9.71811 0.576778 11.0863 0.931519C11.062 1.39216 11.1658 1.85051 11.3859 2.25586C11.606 2.66121 11.934 2.99775 12.3336 3.22824C12.7332 3.45872 13.1887 3.57418 13.6498 3.56181C14.1109 3.54945 14.5596 3.40975 14.9462 3.15819C15.4288 3.64985 15.8571 4.20902 16.2171 4.83319C16.5779 5.45735 16.8479 6.10819 17.0321 6.77152C16.621 6.9806 16.2758 7.29933 16.0346 7.69244C15.7934 8.08555 15.6656 8.53772 15.6654 8.99893C15.6653 9.46013 15.7927 9.9124 16.0336 10.3057C16.2745 10.699 16.6195 11.018 17.0304 11.2274C16.6537 12.5894 15.9365 13.8332 14.9462 14.8415C14.5595 14.5901 14.1107 14.4506 13.6496 14.4384C13.1885 14.4262 12.733 14.5418 12.3335 14.7725C11.934 15.0032 11.6061 15.3399 11.3861 15.7453C11.1662 16.1508 11.0627 16.6092 11.0871 17.0699C9.71866 17.4235 8.28272 17.4229 6.91458 17.0682C6.93879 16.6075 6.83508 16.1492 6.61493 15.7438C6.39479 15.3385 6.06679 15.002 5.66723 14.7715C5.26767 14.541 4.81213 14.4255 4.35102 14.4379C3.88991 14.4503 3.44122 14.59 3.05458 14.8415C2.56208 14.339 2.13508 13.7762 1.78375 13.1665ZM6.50042 13.3299C7.38844 13.842 8.05612 14.664 8.37542 15.6382C8.79125 15.6774 9.20875 15.6782 9.62458 15.639C9.94408 14.6647 10.6121 13.8427 11.5004 13.3307C12.3881 12.8171 13.4342 12.6494 14.4379 12.8599C14.6796 12.5199 14.8879 12.1574 15.0613 11.7782C14.3774 11.0144 13.9997 10.025 14.0004 8.99985C14.0004 7.94985 14.3921 6.96902 15.0613 6.22152C14.8867 5.84248 14.6775 5.48038 14.4363 5.13985C13.4332 5.35011 12.3877 5.18275 11.5004 4.66985C10.6124 4.15766 9.94471 3.33567 9.62542 2.36152C9.20958 2.32235 8.79208 2.32152 8.37625 2.36069C8.05675 3.33498 7.38875 4.15699 6.50042 4.66902C5.61274 5.18262 4.56665 5.35029 3.56292 5.13985C3.32172 5.48009 3.11303 5.84224 2.93958 6.22152C3.62339 6.98532 4.00115 7.97468 4.00042 8.99985C4.00042 10.0499 3.60875 11.0307 2.93958 11.7782C3.11414 12.1572 3.32337 12.5193 3.56458 12.8599C4.56768 12.6496 5.61309 12.817 6.50042 13.3299ZM9.00042 11.4999C8.33738 11.4999 7.70149 11.2365 7.23265 10.7676C6.76381 10.2988 6.50042 9.66289 6.50042 8.99985C6.50042 8.33681 6.76381 7.70093 7.23265 7.23209C7.70149 6.76325 8.33738 6.49985 9.00042 6.49985C9.66346 6.49985 10.2993 6.76325 10.7682 7.23209C11.237 7.70093 11.5004 8.33681 11.5004 8.99985C11.5004 9.66289 11.237 10.2988 10.7682 10.7676C10.2993 11.2365 9.66346 11.4999 9.00042 11.4999ZM9.00042 9.83319C9.22143 9.83319 9.43339 9.74539 9.58967 9.58911C9.74595 9.43283 9.83375 9.22087 9.83375 8.99985C9.83375 8.77884 9.74595 8.56688 9.58967 8.4106C9.43339 8.25432 9.22143 8.16652 9.00042 8.16652C8.7794 8.16652 8.56744 8.25432 8.41116 8.4106C8.25488 8.56688 8.16708 8.77884 8.16708 8.99985C8.16708 9.22087 8.25488 9.43283 8.41116 9.58911C8.56744 9.74539 8.7794 9.83319 9.00042 9.83319Z" />
                                </svg>
                            </div>
                            <div class="links__entry__caption">
                                Settings
                            </div>
                        </router-link>




                        <router-link class="links__entry" :to="{name: 'dashboard.support'}" active-class="active" exact>
                            <div class="links__entry__icon">
                                <svg class="svg" width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M17.3337 13.1687C17.3333 14.3083 16.9437 15.4136 16.2295 16.3017C15.5153 17.1897 14.5192 17.8072 13.4062 18.052L12.8745 16.457C13.3614 16.3768 13.8244 16.1896 14.2302 15.9089C14.6359 15.6282 14.9744 15.261 15.2212 14.8337H13.167C12.725 14.8337 12.301 14.6581 11.9885 14.3455C11.6759 14.0329 11.5003 13.609 11.5003 13.167V9.83366C11.5003 9.39163 11.6759 8.96771 11.9885 8.65515C12.301 8.34259 12.725 8.16699 13.167 8.16699H15.6153C15.412 6.55607 14.6278 5.07472 13.4098 4.00089C12.1919 2.92706 10.624 2.33456 9.00033 2.33456C7.37662 2.33456 5.80871 2.92706 4.5908 4.00089C3.37289 5.07472 2.58868 6.55607 2.38533 8.16699H4.83366C5.27569 8.16699 5.69961 8.34259 6.01217 8.65515C6.32473 8.96771 6.50033 9.39163 6.50033 9.83366V13.167C6.50033 13.609 6.32473 14.0329 6.01217 14.3455C5.69961 14.6581 5.27569 14.8337 4.83366 14.8337H2.33366C1.89163 14.8337 1.46771 14.6581 1.15515 14.3455C0.842587 14.0329 0.666992 13.609 0.666992 13.167V9.00033C0.666992 4.39783 4.39783 0.666992 9.00033 0.666992C13.6028 0.666992 17.3337 4.39783 17.3337 9.00033V13.1687ZM15.667 13.167V9.83366H13.167V13.167H15.667ZM2.33366 9.83366V13.167H4.83366V9.83366H2.33366Z"/>
                                </svg>
                            </div>
                            <div class="links__entry__caption">
                                Support
                            </div>
                        </router-link>

                        <div href="#" class="links__entry" @click="handleLogout">
                            <div class="links__entry__icon">
                                <svg class="svg" width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3.33301 14.0003H4.99967V15.667H14.9997V2.33366H4.99967V4.00033H3.33301V1.50033C3.33301 1.27931 3.42081 1.06735 3.57709 0.91107C3.73337 0.75479 3.94533 0.666992 4.16634 0.666992H15.833C16.054 0.666992 16.266 0.75479 16.4223 0.91107C16.5785 1.06735 16.6663 1.27931 16.6663 1.50033V16.5003C16.6663 16.7213 16.5785 16.9333 16.4223 17.0896C16.266 17.2459 16.054 17.3337 15.833 17.3337H4.16634C3.94533 17.3337 3.73337 17.2459 3.57709 17.0896C3.42081 16.9333 3.33301 16.7213 3.33301 16.5003V14.0003ZM4.99967 8.16699H10.833V9.83366H4.99967V12.3337L0.833008 9.00033L4.99967 5.66699V8.16699Z"/>
                                </svg>
                            </div>
                            <div class="links__entry__caption">
                                Logout
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</template>

<script>
    import { mapGetters, mapMutations } from 'vuex';
    import TheHotMeal from "../../icons/TheHotMeal";
    import TourTemplate from "../../TourTemplate";
    import closeX from "../../icons/closeX";

    export default {
        name: "AppLeftDrawer",
        components: {TourTemplate, TheHotMeal, closeX},
        data: function() {
            return {
                vcoConfig: {
                    handler: this.outside,
                    middleware: this.middleware,
                    events: ['dblclick', 'click'],
                    isActive: true
                }
            }
        },
        computed: {
            ...mapGetters({
                left_drawer: "plannerUi/getLeftDrawer",
                is_mobile: "plannerUi/getMobile",
                finished_setup: "planner/getFinishedSetup",
                user: 'auth/user',
            }),
        },
        watch: {
            '$route.name': function(to, from, next) {
                if((to !== from) && this.is_mobile) {
                    this.closeLeftDrawer(false);
                }
            }
        },
        methods: {
            routerPush() {
                this.$router.push('/meal-planner/planner').catch(()=>{});
            },
            toPlan() {
                if(this.user.finished_setup === false){
                    window.location.href = '/store'
                } else {
                    window.location = '/meal-planner/setup';
                }
            },
            ...mapMutations({
                handleLeftDrawer: 'plannerUi/handleLeftDrawer',
                closeLeftDrawer: 'plannerUi/setLeftDrawer',

            }),
            startTutorial() {
                this.$tours['mealsTour'].start()
            },
            middleware(event) {
                let a = 'mcw-overlay hey';
                return event.target.className === a;
            },

            outside() {
                this.closeLeftDrawer(false);
            },
            swipeLeft() {
                if(this.left_drawer && this.is_mobile) {
                    this.closeLeftDrawer(false);
                }
            },
            handleLogout() {
                this.$store.dispatch('auth/signOut', this.$http)
            }
        },
    }
</script>

<style scoped lang="scss">
    .sidebar {
        position: sticky;
        left: 0;
        top: 0;

        &__close {
            position: absolute;
            right: 0;
            top: 0;
            width: 28px;
            height: 28px;
            padding: 2px;
            margin: 10px -40px 0 0;
            @media screen and (min-width: 1021px) {
                display: none;
            }
            svg {
                width: 100%;
                height: 100%;
                fill: #292d34;
            }
        }

        &.sidebar--mobile {
            position: relative;
        }
        /*padding-top: 40px;*/
        &__head {
            display: flex;
            /*justify-content: center;*/
            flex-direction: column;
            .title {
                cursor: pointer;
                margin: 0 auto;
            }
        }
        &__block {
            margin-bottom: 25px !important;
            display: flex;
            justify-content: center;
            align-items: baseline;
            .caption {
                margin-left: 5px;
                font-family: Gilroy;
            }
        }
    }


    .links {
        width: 100%;
        position: relative;
        display: flex;
        flex-direction: column;
        padding-bottom: 5px;
        &__title {
            font-size: 12px;
        }
        &__entry {
            width: 100%;
            border-radius: 17px;
            font-size: 14px;
            line-height: 100%;
            padding: 8px 12px 8px 18px;
            margin-top: 10px;
            cursor: pointer;
            color: #929292;
            display: flex;
            align-items: center;
            line-height: 1;
            &__icon {
                display: flex;
                position: relative;
                margin-right: 15px;
                margin-left: 5px;
                min-width: 25px;
                .svg {
                    fill: #929292;
                }
            }
            &__caption {
                width: 100%;
                /*justify-content: center;*/
                display: flex;
            }
            &:hover {
                background: #FFFFFF;
                color: var(--purple);
                .svg {
                    fill: var(--purple);
                }
            }
            &.active {
                background: #FFFFFF;
                .svg {
                    fill: var(--purple);
                }
                color: var(--purple);
            }
        }
    }

    .little__profile {
        display: flex;
        flex-direction: column;
        margin: 0 auto;

        &__avatar {
            position: relative;
            margin: 0 auto;
            cursor: pointer;
            &:hover .little__profile__edit {
                background: var(--purple);
                color: #fff;
                svg {
                    fill: currentColor;
                }
            }
        }
        &__username {
            font-size: 20px;
            margin: 0 auto;
            padding-top: 15px;
            text-align: center;
        }
        &__edit {
            position: absolute;
            right: 0;
            bottom: 0;
            height: 25px;
            width: 25px;
            background: white;
            border-radius: 50%;
            justify-content: center;
            display: flex;
            align-items: center;
            color: #292D34;
            transition: .15s linear;

            &:hover {
                cursor: pointer;
            }

            svg {
                fill: currentColor;
            }
        }


        .btn {
            background: var(--purple);
            box-shadow: 0px 8px 16px rgba(178, 125, 255, 0.3);
            border-radius: 8px;
            padding: 10px;
            color: white;
            font-family: Gilroy;
            transition: .15s linear;
            &:hover {
                box-shadow: unset;
            }
        }


        .btn-block {

        }
        .return {
            display: flex;
            flex-direction: row;
            align-items: center;
            min-width: 180px;
            justify-content: center;
            line-height: 1;
            height: 44px;
            margin-bottom: 5px;
            span {
                font-size: 14px;
                font-weight: 400;

            }
            .icon {
                padding-right: 8px;
                margin-top: -2px;
            }
        }

    }
</style>
